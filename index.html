<!DOCTYPE html>
<html>
  <head>
    <title>MC 75-A GPS Accuracy test</title>
 <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="http://www.w3schools.com/lib/w3.css">
<link rel="stylesheet" href="http://www.w3schools.com/lib/w3-theme-black.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto">
<link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.4.0/css/font-awesome.min.css">
<style>
html,body,h1,h2,h3,h4,h5,h6 {font-family: "Roboto", sans-serif}
.w3-sidenav a,.w3-sidenav h4{padding:12px;}
.w3-navbar a{padding-top:12px !important;padding-bottom:12px !important;}
      #map {
        height: 900px;
      }
</style>

<!-- Navbar -->
<ul class="w3-navbar w3-theme w3-grey w3-top w3-left-align w3-large" style="z-index:4;">
  <li class="w3-opennav w3-right w3-hide-large">
    <a class="w3-hover-white w3-large w3-theme-l1" href="javascript:void(0)" onclick="w3_open()"><i class="fa fa-bars"></i></a>
  </li>
  <li><a href="http://gisjohnecs.github.io/" class="w3-theme-l1 fa-fa-globe"><i class="fa fa-globe w3-margin-right"></i>MC 75-A GPS Accuracy test</a></li>
  

  <li><a href="http://gisjohnecs.github.io/" class="w3-theme-l1 fa-fa-refresh"><i class="fa fa-refresh w3-margin-right"></i>Reset Map</a></li>
 </ul>
    <title>GPS Accuracy Test</title>
 
<<!-- Sidenav -->
<nav class="w3-sidenav w3-collapse w3-light-grey w3-animate-left w3-ana-teal-blue" style="z-index:3;width:250px;margin-top:21px;">
  <a href="javascript:void(0)" onclick="w3_close()" class="w3-right w3-xlarge w3-padding-large w3-hover-black w3-hide-large" title="close menu">
    <i class="fa fa-remove"></i>
  </a>
  <!--<a href="#" class="w3-border-bottom w3-large"><img src="https://googledrive.com/host/0By8aK2KY8i6wcmdlZ0x0WDd5aVk/ecs_logo.jpg" style="width:80%;"></a>-->
 
<div class="w3-padding-hor-8"> </div>
 <form class="w3-container w3-card-4">
 <input class="w3-check" type="checkbox"  id="layer_01" onclick="toggleLayers(0);"checked>
<label class="w3-validate ">GPS Points</label></br>
<input class="w3-check"  type="checkbox"  id="layer_03" onclick="toggleLayers(2);" checked>
<label class="w3-validate">GPS Test</label></br>
</form></div></div>
</nav>
<!-- Overlay effect when opening sidenav on small screens -->
<div class="w3-overlay w3-hide-large" onclick="w3_close()" style="cursor:pointer" title="close side menu"></div>


</head>
  <body>
  <!-- Main content: shift it to the right by 250 pixels when the sidenav is visible -->
<div class="w3-main" style="margin-left:250px">
<div class="w3-main" style="margin-top:25px">
    <div id="map"></div>
    <script>
	  var layers=[]; 
	  var labels=[];//Toggle Road Layers	
      var labels=[]; 
//------------------------------------------------------------------------------------------------------------------

//Set Google Map	  
      var map;
      function initMap() {
        map = new google.maps.Map(document.getElementById('map'), {
          zoom: 12,
          center: {lat: -12.277246, lng: 25.872411}
        });
//--------------------------------------------------------------------------------------------------------------------


//-------------------------------------------------------------------------------------------------------------

//--------------------------------------------------------------------------------------------------------------
 //Declare Road Name layer
layers[1] = new google.maps.Data({
	zIndex: 2,
    preserveViewport: true,
	suppressInfoWindows: true,
	map: map
});
layers[1].loadGeoJson('https://GISJohnECS.github.io/27July2016RoadName.geojson');
//----------------------------------------------------------------------------------------------------------------

//----------------------------------------------------------------------------------------------------------
//Set Style for the Road Layer		
		layers[1].setStyle(function(feature) {
          var color = feature.getProperty('Colour');
          if (feature.getProperty('isColorful')) {
            color = feature.getProperty('Colour');
          }
          return /** @type {google.maps.Data.StyleOptions} */({
            fillColor: color,
			fillOpacity: 0.75,
            strokeColor: 'black',
            strokeWeight: 0.5
          });
        });
------------------------------------------------------------------------------------

		//Layers appearance on zoom function
		google.maps.event.addListener(map, 'zoom_changed', function() {
    zoomLevel = map.getZoom();
    if (zoomLevel <= 19) {
        labels[1].setMap(map);
    } 
	else {
        labels[1].setMap(null);
    }
});


//Set Infowindow variable
        var infowindow = new google.maps.InfoWindow();
		
//-----------------------------------------------------------------------------------------------------
	

//-------------------------------------------------------------------------------------------		
		//Set InfoWindow Layout for Road Name Layer
		  layers[1].addListener('click', function(event) {
		  var GPSLogID =   event.feature.getProperty('gpslogid_3');
	  var CreatedDate =   event.feature.getProperty('createddat_1');
	  var RoadNam=   event.feature.getProperty('roadname_3');
	  var pp = [];
	  var i;
	  var jj;
	  var newHTML = [];

		var jj = newHTML.join("");
		
	  var myHTMLss = '<table>' +
	         jj +
			 '<tr><td><b>Road Name:</b></td><td>'+RoadNam+'</td></tr>'  +
	      '<tr><td><b>GPSLogId:</b></td><td>'+GPSLogID+'</td></tr>' + 
		  '<tr><td><b>Created Date and Time:</b></td><td>'+CreatedDate+'</td></tr>' +
		  '<td colspan = 4><img src="https://googledrive.com/host/0By8aK2KY8i6wcmdlZ0x0WDd5aVk/ecs_logo.jpg" alt="" border=0 height=100 width=125></img></td>' +
	      '</table>';
      infowindow.setContent(myHTMLss);
      infowindow.setPosition(event.latLng);
      infowindow.setOptions({pixelOffset: new google.maps.Size(0,-30), Zoom: 30});
      infowindow.open(map);
          event.feature.setProperty('isColorful', true);
        });

//Highlight Outline for Segmented layer with Mouse Over
        layers[1].addListener('mouseover', function(event) {
           layers[1].revertStyle();
           layers[1].overrideStyle(event.feature, {strokeWeight: 1});
        });

         layers[1].addListener('mouseout', function(event) {
          layers[1].revertStyle();
        });
//----------------------------------------------------------------------------------------------		
      }
//------------------------------------------------------------------------------------------------
	
//Toggle Layers	
	  function toggleLayers(i)
{
  if(layers[i].getMap()==null) {   
      layers[i].setMap(map); 
  } 
  else {
     layers[i].setMap(null);
}
}
    </script>
    <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBbC9hHZT51Sm2ZCFok4ciJg_9iyss8h4A&callback=initMap">
    </script>
  </body>
</html>
